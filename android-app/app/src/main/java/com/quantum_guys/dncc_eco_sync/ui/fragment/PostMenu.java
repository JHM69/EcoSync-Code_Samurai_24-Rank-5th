package com.quantum_guys.dncc_eco_sync.ui.fragment;import static com.quantum_guys.dncc_eco_sync.ui.activities.MainActivity.userId;import android.annotation.SuppressLint;import android.content.Context;import android.content.Intent;import android.content.SharedPreferences;import android.os.Bundle;import android.view.LayoutInflater;import android.view.View;import android.view.ViewGroup;import android.widget.Button;import android.widget.TextView;import android.widget.Toast;import androidx.annotation.Nullable;import com.google.android.material.bottomsheet.BottomSheetDialogFragment;import com.google.firebase.firestore.FirebaseFirestore;import com.quantum_guys.dncc_eco_sync.BuildConfig;import com.quantum_guys.dncc_eco_sync.R;import com.quantum_guys.dncc_eco_sync.ui.activities.MainActivity;import java.util.HashMap;public class PostMenu extends BottomSheetDialogFragment {    String post, name;    public PostMenu(String post, String name) {        this.post=post;        this.name=name;    }    @SuppressLint({"UseCompatLoadingForDrawables", "SimpleDateFormat", "SetTextI18n"})    @Override    public View onCreateView(LayoutInflater inflater, @Nullable            ViewGroup container, @Nullable Bundle savedInstanceState) {        View v = inflater.inflate(R.layout.post_menu,                container, false);        TextView show = v.findViewById(R.id.textView14);        Button share = v.findViewById(R.id.share);        Button copy = v.findViewById(R.id.copy);        Button report = v.findViewById(R.id.report);        show.setText(name+"'s Post");        copy.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View view) {                String text = "https://3.208.28.247.com/post/"+post;                setClipboard(getContext(), text);            }        });        share.setOnClickListener(view -> {            try {                Intent shareIntent = new Intent(Intent.ACTION_SEND);                shareIntent.setType("text/plain");                shareIntent.putExtra(Intent.EXTRA_SUBJECT, name+"'s Post on স্বচ্ছ ঢাকা");                String link = name+"'s Post on স্বচ্ছ ঢাকা\n" + "http://3.208.28.247:3000/post/"+post;                String shareMessage = link + "\n \n Install the app here: https://play.google.com/store/apps/details?id=" + BuildConfig.APPLICATION_ID +"\n\n";                shareIntent.putExtra(Intent.EXTRA_TEXT, shareMessage);                startActivity(Intent.createChooser(shareIntent, "choose one"));            } catch(Exception ignored) {            }        });        report.setOnClickListener(view -> {            HashMap<String, Object> re = new HashMap<>();            re.put("postId", post);            re.put("userId", userId);            re.put("timestamp", System.currentTimeMillis());            FirebaseFirestore.getInstance().collection("Reports").document(String.valueOf(System.currentTimeMillis())).set(re);            Toast.makeText(getContext(), "Your Report Submitted to Admin Review", Toast.LENGTH_SHORT).show();        });        return v;    }    @SuppressLint("ObsoleteSdkInt")    private void setClipboard(Context context, String text) {        if(android.os.Build.VERSION.SDK_INT < android.os.Build.VERSION_CODES.HONEYCOMB) {            android.text.ClipboardManager clipboard = (android.text.ClipboardManager) context.getSystemService(Context.CLIPBOARD_SERVICE);            clipboard.setText(text);        } else {            android.content.ClipboardManager clipboard = (android.content.ClipboardManager) context.getSystemService(Context.CLIPBOARD_SERVICE);            android.content.ClipData clip = android.content.ClipData.newPlainText("Copied Text", text);            clipboard.setPrimaryClip(clip);        }        Toast.makeText(context, "Post link copied", Toast.LENGTH_SHORT).show();    }    public void setTheme(String name) {        SharedPreferences preferences = requireContext().getSharedPreferences("Theme", Context.MODE_PRIVATE);        SharedPreferences.Editor editor = preferences.edit();        editor.putString("ThemeName", name);        editor.apply();        requireActivity().finish();        startActivity(new Intent(getContext(), MainActivity.class));    }}